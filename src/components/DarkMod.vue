<template>
    <button
        @click="toggleTheme"
        class="p-2 rounded transition-colors duration-300
               bg-white text-black dark:bg-gray-800 dark:text-white
               border border-gray-300 dark:border-gray-600 mx-2 flex items-center"
        aria-label="Toggle Theme"
    >
        <span v-html="isDark ? moonIcon : sunIcon" class="w-5 h-5"></span>
    </button>
</template>

<script setup>
import { ref, onMounted } from 'vue'

const isDark = ref(false)

onMounted(() => {
    isDark.value = localStorage.getItem('theme') === 'dark'
    updateTheme()
})

function toggleTheme() {
    isDark.value = !isDark.value
    updateTheme()
}

function updateTheme() {
    const html = document.documentElement
    if (isDark.value) {
        html.classList.add('dark')
        localStorage.setItem('theme', 'dark')
    } else {
        html.classList.remove('dark')
        localStorage.setItem('theme', 'light')
    }
}

const sunIcon = `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0,0,256,256" class="fill-yellow-400" width="20" height="20">
  <g transform="scale(8.53333,8.53333)">
    <path d="M14.98438,0.98633c-0.55152,0.00862 -0.99193,0.46214 -0.98437,1.01367v3c-0.0051,0.36064 0.18438,0.69608 0.49587,0.87789c0.3115,0.18181 0.69676,0.18181 1.00825,0c0.3115,-0.18181 0.50097,-0.51725 0.49587,-0.87789v-3c0.0037,-0.2703 -0.10218,-0.53059 -0.29351,-0.72155c-0.19133,-0.19097 -0.45182,-0.29634 -0.72212,-0.29212zM5.79688,4.79883c-0.40657,0.0009 -0.77213,0.24784 -0.92475,0.62467c-0.15262,0.37684 -0.06192,0.80856 0.22944,1.09212l2.12109,2.12109c0.25082,0.26123 0.62326,0.36646 0.9737,0.2751c0.35044,-0.09136 0.62411,-0.36503 0.71546,-0.71546c0.09136,-0.35044 -0.01387,-0.72288 -0.2751,-0.9737l-2.12109,-2.12109c-0.18874,-0.19402 -0.44807,-0.30325 -0.71875,-0.30273zM24.17188,4.79883c-0.2598,0.00774 -0.50638,0.11632 -0.6875,0.30273l-2.12109,2.12109c-0.26123,0.25082 -0.36645,0.62326 -0.2751,0.9737c0.09136,0.35043 0.36503,0.6241 0.71546,0.71546c0.35043,0.09136 0.72288,-0.01387 0.9737,-0.2751l2.12109,-2.12109c0.29576,-0.28749 0.38469,-0.72707 0.22393,-1.10691c-0.16075,-0.37985 -0.53821,-0.62204 -0.9505,-0.60988zM15,8c-3.86599,0 -7,3.13401 -7,7c0,3.86599 3.13401,7 7,7c3.86599,0 7,-3.13401 7,-7c0,-3.86599 -3.13401,-7 -7,-7z"/>
  </g>
</svg>`

const moonIcon = `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fill-white" width="20" height="20">
  <path d="M486.215,404.449c-1.984-3.191-5.763-4.792-9.434-3.976c-17.444,3.841-34.958,5.788-52.055,5.788
    c-133.036,0-241.268-108.232-241.268-241.268c0-55.257,18.307-107.329,52.943-150.586c2.349-2.932,2.593-7.028,0.609-10.219
    c-1.983-3.192-5.764-4.792-9.434-3.977c-42.737,9.407-82.736,29.768-115.671,58.881c-3.669,3.242-4.014,8.843-0.771,12.512
    c3.241,3.669,8.843,4.014,12.512,0.771c24.456-21.618,53.087-38.054,83.854-48.272c-27.405,41.94-41.772,90.166-41.772,140.89
    c0,69.18,26.94,134.221,75.857,183.138c48.918,48.92,113.958,75.86,183.14,75.86c10.112,0,20.351-0.632,30.629-1.886
    c-45.245,46.138-106.646,72.167-171.908,72.167c-133.035,0-241.267-108.232-241.267-241.268c0-34.597,7.17-67.983,21.312-99.232
    c2.019-4.459,0.039-9.712-4.422-11.731c-4.461-2.019-9.713-0.039-11.731,4.422c-15.188,33.56-22.888,69.406-22.888,106.541
    c0,69.18,26.94,134.221,75.857,183.138C149.224,485.058,214.264,512,283.446,512c78.95,0,152.635-35.476,202.16-97.331
    C487.955,411.737,488.199,407.641,486.215,404.449z"/>
</svg>`
</script>
